# Αυτοματοποίηση με τρίτο πρόσωπο του Android Αυτοματοποιημένο App

**Αυτό το άρθρο έχει γραφτεί πριν από την έκδοση 2.4 του AndroidAPS. Υπάρχει plugin [ αυτοματισμού AndroidAPS ](./Automation.rst) με την έκδοση 2.4 του AndroidAPS. Για μερικούς, αυτό εδώ μπορεί να είναι ακόμα χρήσιμο, αλλά θα πρέπει να χρησιμοποιείται μόνο από προχωρημένους χρήστες.**

Δεδομένου ότι το AndroidAPS είναι ένα σύστημα υβριδικού κλειστού κυκλώματος, είναι απαραίτητη κάποια αλληλεπίδραση με το χρήστη (π.χ. πείτε στο κύκλωμα ότι περπατάτε, τρώτε, ξαπλώνετε στον καναπέ...). Οι συχνές είσοδοι χειροκίνητων πληροφοριών μπορούν να αυτοματοποιηθούν μέσω εξωτερικών εργαλείων όπως το Automate ή το IFTTT για την επέκταση της πρόσφατης λειτουργικότητας του AndroidAPS.

## Android Automate App

Η δωρεάν εφαρμογή Android ™ Automate σάς επιτρέπει να αυτοματοποιήσετε διάφορες εργασίες στο smartphone σας. Δημιουργήστε τις αυτοματοποιήσεις σας με διαγράμματα ροής, κάνετε τη συσκευή σας να αλλάζει αυτόματα τις ρυθμίσεις όπως Bluetooth, Wi-Fi, NFC ή να εκτελεί ενέργειες όπως αποστολή μηνυμάτων SMS, e-mail, βάσει της θέσης σας, την ώρας της ημέρας ή οποιουδήποτε άλλου "ενεργοποιητή συμβάντων". Μπορείτε να αυτοματοποιήσετε σχεδόν τα πάντα στη συσκευή σας, Αυτοματοποιήστε ακόμη και τις προσθήκες υποστήριξης για Tasker και Locale.

Χρησιμοποιώντας αυτό το εργαλείο μπορείτε εύκολα να δημιουργήσετε ροές εργασίας για την αυτόματη θεραπεία του σακχαρώδη διαβήτη σας με βάση διάφορες προϋποθέσεις σύμφωνα με την αρχή του «αν αυτό... και αυτό... όχι αυτό..., τότε κάνε αυτό... και αυτό...'. Υπάρχουν χιλιάδες δυνατότητες που μπορείτε να διαμορφώσετε.

Μέχρι τώρα είναι απαραίτητο ** να γίνει κύκλωμα μέσω του προφίλ Nightscout **, καθώς το Automate εκτελεί τις εντολές μέσω HTTP αίτησης απευθείας στον ιστότοπό σας, ο οποίος στη συνέχεια συγχρονίζεται με την εφαρμογή AndroidAPS.

** Το κύκλωμα εκτός σύνδεσης (άμεση επικοινωνία μεταξύ της εφαρμογής Automate και AnroidAPS) δεν υποστηρίζεται ακόμα **, αλλά είναι τεχνολογικά εφικτό. Ίσως θα υπάρξει λύση στο μέλλον. Εάν έχετε βρει έναν τρόπο να το κάνετε αυτό, παρακαλώ προσθέστε το σε αυτήν την τεκμηρίωση ή επικοινωνήστε με έναν προγραμματιστή.

### Βασικές απαιτήσεις

#### Αυτόματη εφαρμογή

Κάντε λήψη του Android Automate στο Google Play Store ή στη διεύθυνση [ https://llamalab.com/automate/ ](https://llamalab.com/automate/) και εγκαταστήστε το στο smartphone όπου εκτελείται το AndroidAPS.

Μεταβείτε στις ρυθμίσεις συστήματος smartphone> Εφαρμογές> Αυτοματοποίηση> Αγγίξτε το γρανάζι στην επάνω δεξιά γωνία της οθόνης> Επιλέξτε "Εκτέλεση κατά την εκκίνηση του συστήματος". Αυτό θα εκτελέσει αυτόματα τις ροές εργασίας σας κατά την εκκίνηση του συστήματος.

![Αυτόματη ζήτηση HTTP](../images/automate-app2.png)

#### AndroidAPS

Στο AndroidAPS NSClient, αγγίξτε το γρανάζι στην επάνω δεξιά γωνία και μεταβείτε στις Ρυθμίσεις σύνδεσης> Αποεπιλέξτε το 'Χρήση μόνο σύνδεσης WiFi' και 'Μόνο αν φορτίζει' καθώς η αυτοματοποιημένη επεξεργασία λειτουργεί μόνο όταν το AndroidAPS έχει πραγματική σύνδεση με το nightcout.

![Προτιμήσεις σύνδεσης Nightscout](../images/automate-aaps1.jpg)

Στο AndroidAPS NSClient, αγγίξτε το γρανάζι στην επάνω δεξιά γωνία και μεταβείτε στις Ρυθμίσεις για προχωρημένους> Αποεπιλέξτε "Μόνο μεταφόρτωση NS (δοσμένο συγχρονισμό)" και "Καμία μεταφόρτωση στο NS"

![Προτιμήσεις λήψεων Nightscout](../images/automate-aaps2.jpg)

### Παραδείγματα ροής εργασίας

#### Παράδειγμα 1: Αν εντοπιστεί δραστηριότητα (π.χ. περπάτημα ή τρέξιμο), τότε ορίστε ένα υψηλό TT. Και αν τελειώσει η δραστηριότητα, περιμένετε 20 λεπτά και στη συνέχεια ακυρώστε το TT

Αυτή η ροή εργασίας θα ακούει τους αισθητήρες smartphone (βηματόμετρο, αισθητήρα βαρύτητας...) που ανιχνεύει τη συμπεριφορά της δραστηριότητας. Αν υπάρχει πρόσφατη δραστηριότητα όπως περπάτημα, τρέξιμο ή ποδήλατο, τότε το Automate θα ορίσει έναν υψηλό στόχο για το χρήστη που καθορίζεται από τον χρήστη για τον καθορισμένο χρόνο. Εάν λήξει η δραστηριότητα, το smartphone σας θα εντοπίσει αυτό, περιμένετε 20 λεπτά και στη συνέχεια ορίστε τον στόχο πίσω στην κανονική τιμή του προφίλ.

Κάντε λήψη του αυτοματοποιημένου σεναρίου [ https://llamalab.com/automate/community/flows/27808 ](https://llamalab.com/automate/community/flows/27808).

Επεξεργαστείτε το sling πιέζοντας το τροποποιημένο μολύβι> Διάγραμμα ροής

![Αυτόματο sling](../images/automate-app3.png)

Προσαρμόστε τη ροή εργασίας σύμφωνα με τις επιθυμίες σας ως εξής:

![Αυτόματο sling](../images/automate-app6.png)

1. = Ρυθμίστε το υψηλό TT
2. = Επιστρέψτε στο κανονικό στόχο 20 λεπτά μετά το τέλος της δραστηριότητας

1 ![Αυτόματο sling](../images/automate-app1.png)

2 ![Αυτόματο sling](../images/automate-app5.png)

Διεύθυνση URL αιτήματος: Η διεύθυνση URL NS σας με λήξη /api/v1/treatments.json (π.χ. https://my-cgm.herokuapp.com/api/v1/treatments.json)

Αίτημα περιεχομένου:

* υψηλός στοχος / χαμηλός στόχος: Η υψηλή τιμή TT (πάνω και κάτω πρέπει να είναι η ίδια τιμή)
* διάρκεια: Η διάρκεια του υψηλού TT (μετά την πάροδο του χρόνου θα αντιστραφεί ο κανονικός στόχος προφίλ εκτός αν η δραστηριότητα συνεχιστεί). 
* μυστικό: Το hash σας API SHA1. Δεν είναι το κλειδί API σας! Μπορείτε να μετατρέψετε το κλειδί API σας σε μορφή SHA1 στο [ http://www.sha1-online.com/ ](http://www.sha1-online.com/)

Αποθήκευση: Πατήστε "Τέλος" στο γάντζο

Ξεκινήστε το sling: Πατήστε στο κουμπί Αναπαραγωγή

#### Παράδειγμα 2: Εάν το xDrip + ειδοποιεί για υψηλό συναγερμό BG, τότε ορίστε ένα χαμηλό TT για ... λεπτά.

Αυτή η ροή εργασίας θα ακούσει το κανάλι ειδοποίησης xDrip +. Εάν ενεργοποιηθεί μια +xDrip προειδοποίηση υψηλού BG καθοριζόμενη από το χρήστη, τότε η ρύθμιση Automate θα ορίσει ένα χαμηλό στόχο ρυθμού που καθορίζεται από το χρήστη για τον καθορισμένο χρόνο. Μετά από λίγο, μια άλλη πιθανή προειδοποίηση θα επεκτείνει τη διάρκεια του χαμηλού TT.

##### xDrip+

Αρχικά, πρέπει να προσθέσετε μια ειδοποίηση υψηλού BG στο xDrip + ως εξής:

![xDrip + ρυθμίσεις ειδοποίησης](../images/automate-xdrip1.png)

Όνομα προειδοποίησης: (Δώστε προσοχή σε αυτό!) Αυτό το όνομα είναι απαραίτητο για την πυροδότηση της αλληλουχίας. Θα πρέπει να είναι αδιαμφισβήτητο και όχι παρόμοιο με άλλα ονόματα συναγερμού. Παράδειγμα: 'συναγερμός 180' δεν πρέπει να υπάρχει δίπλα στο 'συναγερμός 80'.

Κατώτατο όριο: τιμή BG που πρέπει να πυροδοτήσει την υψηλή ειδοποίηση.

Προεπιλεγμένη αναβολή: Εισαγάγετε τη διάρκεια που σχεδιάζετε να ορίσετε για το χαμηλό σας TT εδώ, καθώς η ειδοποίηση θα επανέλθει και ίσως να παραταθεί η διάρκεια του χαμηλού TT.

![xDrip + ρυθμίσεις ειδοποίησης](../images/automate-xdrip2.png)

##### Αυτοματοποιήστε

Δεύτερον, κατεβάστε το σενάριο Automate [ https://llamalab.com/automate/community/flows/27809 ](https://llamalab.com/automate/community/flows/27809).

Επεξεργαστείτε το sling πιέζοντας το τροποποιημένο μολύβι> Διάγραμμα ροής

![Αυτόματο sling](../images/automate-app3.png)

Προσαρμόστε τη ροή εργασίας σύμφωνα με τις επιθυμίες σας ως εξής:

Εντός της "τοποθεσίας ειδοποίησης";, πρέπει να ρυθμίσετε το "Τίτλο" στο όνομα της ειδοποίησης xDrip + που θα έπρεπε να ενεργοποιήσει την ειδοποιήσει και να προσθέσει μια * μεταβλητή πριν και μετά από αυτό το όνομα.

![Αυτόματο sling](../images/automate-app7.png)

![Αυτόματο sling](../images/automate-app4.png)

Διεύθυνση URL αιτήματος: Η διεύθυνση URL NS σας με λήξη /api/v1/treatments.json (π.χ. https://my-cgm.herokuapp.com/api/v1/treatments.json)

Αίτημα περιεχομένου:

* υψηλός στόχος / Χαμηλός στόχος: Η χαμηλή τιμή TT (πάνω και κάτω πρέπει να είναι η ίδια τιμή)
* διάρκεια: Η διάρκεια του χαμηλού TT (μετά από το χρόνο θα επιστρέψει ο κανονικός στόχος προφίλ). Συνιστάται να χρησιμοποιείτε την ίδια διάρκεια όπως στην xDrip + ειδοποίηση Standard snooze'
* μυστικό: Το hash σας API SHA1. Δεν είναι το κλειδί API σας! Μπορείτε να μετατρέψετε το κλειδί API σας σε μορφή SHA1 στο [ http://www.sha1-online.com/ ](http://www.sha1-online.com/)

Αποθήκευση: Πατήστε "Τέλος" στο γάντζο

Ξεκινήστε το sling: Πατήστε στο κουμπί Αναπαραγωγή

#### Παράδειγμα 3: Ας προστεθεί από εσάς!!!

Προσθέστε επιπλέον ροές εργασίας μεταφορτώντας το αρχείο .flo στην αυτοματοποίηση κοινότητας (με τη λέξη-κλειδί 'Nightscout') και περιγράψτε την εδώ κάνοντας [ pull request σε εναποθετήριο AndroidAPSdocs ](../make-a-PR.md).

## Αν αυτό, τότε (IFTTT)

Μη διστάσετε να προσθέσετε ένα ''πως να το κάνεις'' μέσω προσωπικού μηνύματος...