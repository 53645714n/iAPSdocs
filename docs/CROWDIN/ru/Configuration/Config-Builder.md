# Конфигуратор

В зависимости от настроек, конфигуратор можно открыть с помощью вкладки в верхней части экрана или через сэндвич-меню.

![Открыть компоновщик конфигурации](../images/ConfBuild_Open.png)

Конфигуратор (Конф) - это вкладка, на которой можно подключать и отключать модули программы. Ячейки с левой стороны (A) позволяют выбрать, какими модулями программы вы будете пользоваться, ячейки справа (C) позволяют представить эти модули в виде вкладок (E) в AndroidAPS. Если правая ячейка не активирована, доступ к функциям можно получить из выпадающего меню (D) в левом верхнем углу экрана.

Там, где в пределах модуля доступны дополнительные параметры, можно нажать на шестеренку (B), которая их откроет.

**Первая конфигурация:** Начиная с версии 2.0 AAPS процесс настройки AndroidAPS контролируется Мастером установки. Для его запуска нажмите на меню под тремя точками в правом верхнем углу экрана меню (F) и выберите «Мастер установки».

![Опции конфигуратора и шестеренка настроек](../images/ConfBuild_ConfigBuilder.png)

## Вкладка или сэндвич-меню

С помощью переключателя под значком глаза вы можете решить, как открыть соответствующий раздел программы.

![Вкладка или сэндвич-меню](../images/ConfBuild_TabOrHH.png)

## Профиль

Выберите нужный базальной профиль См. страницу [Профили](../Usage/Profiles.md) для дополнительной информации.

### Локальный профиль (рекомендуется)

Локальный профиль использует базальной профиль, введенный вручную в телефоне. Как только он выбран, появляется новая вкладка, где можно при необходимости изменить данные профиля, считываемые с помпы. При следующем переключении профиля они записываются на помпу в профиль 1. Мы рекомендуем этот профиль, поскольку он не зависит от интернет-соединения.

Преимущества:

* не требуется подключение к интернету для изменения настроек профиля
* изменения профиля могут быть сделаны непосредственно на телефоне

Недостатки:

* только один профиль

### Профиль Nightscout (NS)

Профиль NS использует профили, которые вы сохранили на сайте Nightscout (https://[адрес вашего сайта]/profile). Вы можете воспользоваться [Переключателем профиля](../Usage/Profiles.md) для изменения активного профиля, это действие записывает данные профиля в помпу на случай отказа AndroidAPS. Это позволяет легко создавать несколько профилей в Nightscout (например.. работа, дом, спорт, отдых и т. п.). Вскоре после нажатия кнопки «Сохранить» они будут переданы в AAPS если ваш смартфон подключен к интернету. Даже без подключения к Интернету или без подключения к Nightscout профили Nightscout доступны в AAPS после синхронизации.

Выполните ** переключение профиля** для активации профиля из Nightscout. Нажмите и удерживайте поле текущего профиля в верхнем углу (серое поле между светло синим полем «Открытый/замкнутый цикл» и темно синим полем области целевых значений) > переключатель профиля > выбрать профиль > ОК. AAPS также прописывает выбранный профиль в помпу, так что он будет доступен и выполняться без AAPS при непредвиденных ситуациях.

Преимущества:

* множественные профили
* легко редактировать с помощью ПК или планшета

Недостатки:

* невозможность локальных изменений в настройках профиля
* профиль не может быть изменен непосредственно на телефоне

### Простой профиль

Простой профиль с одним блоком времени для продолжительности действия инсулина DIA, углеводного коэффициента IC, чувствительности к инсулину ISF, скорости базала и целевым диапазоном (напр. если скорость базала не изменяется в течение дня). Вероятнее всего, будет использоваться для тестирования, если только у вас не одни и те же коэффициенты 24 часа в сутки. После выбора «Простого профиля», в AAPS появится новая вкладка, куда можно ввести данные профиля.

## Инсулин

Выберите кривую, соответствующую типу вашего инсулина. Варианты 'Быстродействующий Oref', Сверхбыстрый Oref' и 'Безпиковый Oref' имеют вид экспоненты. Более подробно см. в [Документах OpenAPS](http://openaps.readthedocs.io/en/latest/docs/While%20You%20Wait%20For%20Gear/understanding-insulin-on-board-calculations.html#understanding-the-new-iob-curves-based-on-exponential-activity-curves), кривые различаются на основе длительности действия инсулина DIA и времени пика. Длительность действия инсулина DIA всегда должна быть не менее 5 часов, подробнее в разделе Профиль инсулина [на этой странице](../Getting-Started/Screenshots.md). Для быстродействующих и сверхбыстрых инсулинов, длительность действия инсулина DIA является единственной переменной, которую можно настроить самостоятельно, время пика фиксированное. Безпиковый позволяет настроить как DIA, так и время пика, эта опция для опытных пользователей, которые знают последствия таких параметров. График инсулина позволяет понять поведение других кривых. Его можно увидеть на вкладке, если отметить галочкой в конфигураторе или выбрать из выпадающего меню слева.

### Быстродействующий Oref

* рекомендуется для Humalog, Novolog и Novorapid
* DIA (длительность действия инсулина) = по крайней мере 5.0 часов
* Макс. пик = 75 минут после инъекции

### Сверхбыстрый Oref

* рекомендуется для FIASP
* DIA (длительность действия инсулина) = по крайней мере 5.0 часов
* Макс. пик = 55 минут после инъекции

Для многих людей действие FIASP практически незаметно спустя 3-4 часа, даже если, как правило, еще остается 0.0xx ед. Это остаточное количество может быть ощутимо во время занятий спортом, например. Поэтому AndroidAPS использует как минимум 5 часов в качестве DIA.

![Ультра-быстрый Oref в конфигураторе](../images/ConfBuild_UltraRapidOref.png)

### Безпиковый Oref

На профиле «Безпиковый 0ref» можно самостоятельно ввести пиковое время. Если в профиле не определено более высокое значение, DIA автоматически устанавливается на 5 часов.

Этот инсулиновый профиль рекомендуется если используется неподдерживаемый тип инсулина или смесь различных инсулинов.

## Источник данных гликемии

Выберите источник данных ГК - см. страничку [Источник ГК](BG-Source.rst) для получения дополнительной информации по настройкам.

* [xDrip +](https://xdrip-plus-updates.appspot.com/stable/xdrip-plus-latest.apk)
* ГК с клиента Nightscout
* [MM640g](https://github.com/pazaan/600SeriesAndroidUploader/releases)
* [Glimp](https://play.google.com/store/apps/details?id=it.ct.glicemia&hl=de)
* [Dexcom App (patched)](https://github.com/dexcomapp/dexcomapp/) - Select 'Send BG data to xDrip+' if you want to use xDrip+ alarms. ![Источник ГК в конфигураторе](../images/ConfBuild_BGSource.png)
* [Poctech](http://www.poctechcorp.com/en/contents/268/5682.html)

## Помпа

Выберите помпу, которой пользуетесь.

* [Dana R](DanaR-Insulin-Pump.md)
* DanaR Корея (DanaR для корейского рынка)
* DanaRv2 (DanaR с обновленной прошивкой)
* [Dana RS](DanaRS-Insulin-Pump.md)
* [Accu-Chek Combo](Accu-Chek-Combo-Pump.md) (требует установки утилиты ruffy)
* MDI инъекции инсулина шприцем/шприц-ручкой (на основе предложений от AAPS по ведению терапии)
* Виртуальная помпа (открытый цикл для помпы, не имеющей драйверов - только предложения по ведению терапии от AAPS)

Для активации сторожа BT, BT watchdog, пользуйтесь **Дополнительными параметрами**. Он отключает bluetooth на одну секунду, если подключение к помпе невозможно. Это помогает на некоторых телефонах, где зависает стек bluetooth.

## Определение чувствительности

Выберите тип анализа чувствительности. Алгоритм будет анализировать историю данных и вносить коррективы, если признает, что вы реагируете более чутко (или, наоборот, более резистентно) на инсулин, чем обычно. Подробнее об алгоритме чувствительность Oref0 можно прочитать в [документации OpenAPS](http://openaps.readthedocs.io/en/latest/docs/walkthrough/phase-4/advanced-features.html#auto-sensitivity-mode).

Вы можете вывести график чувствительности на экран, отметив галочкой соответствующий пункт из выпадающего меню графиков. Он изображается в виде белой линии. Для применения авточувствительности вы должны находиться на шестом этапе [целей](../Usage/Objectives).

### Настройки усваиваемости

Если вы используете Oref1 с микроболюсами SMB, следует заменить минимальное время действия углеводов**min_5m_carbimpact** на 8. Это значение используется только во время пробелов в мониторинге или когда физическая нагрузка "съедает" весь подъем гликемии, которая в ином случае заставила бы алгоритм AAPS компенсировать активные углеводы COB организма. В те времена когда поглощение углеводов не может быть рассчитано динамически на основе реакции крови, он по умолчанию применяет эту скорость распада. Этот параметр не приводит к отказам.

## Система ИПЖ

Выберите нужный алгоритм APS для ведения терапии. Подробности выбранного алгоритма можно просмотреть на вкладке OpenAPS(OAPS).

* Помощник болюса OpenAPS MA (по состоянию алгоритма на 2016г.)
* Помощник болюса OpenAPS AMA (расширенный помощник болюса, состояние алгоритма на 2016г.).  
    Подробнее об OpenAPS AMA в [документации OpenAPS](http://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/autosens.html#advanced-meal-assist-or-ama). Говоря просто, его преимущество в том, что после болюса на еду система быстрее определит верхнюю временную цель если углеводы введены верно.  
    Обратите внимание, что для пользования алгоритмом следует дойти до [Цели 7](../Usage/Objectives.md).
* [OpenAPS SMB](../Usage/Open-APS-features.md) (супер микро болюс, новый алгоритм для опытных пользователей)   
    ; обратите внимание, работа OpenAPS SMB требует достижения [цели 8](../Usage/Objectives.md), а в конфигураторе минимальное 5-мин действие углеводов должно быть установлено как 8: конфигуратор> чувствительность >параметр чувствительности Oref1.

## Замкнутый цикл

Определите, хотите ли вы доверить AAPS автоматическое управление.

### Открытый цикл

AAPS постоянно оценивает все доступные данные (активный инсулин IOB, активные углеводы COB, сахар крови и т. п.) и при необходимости делает предложения о корректировке терапии. Предложения не выполняются автоматически (как при замкнутом цикле) а вводятся вручную на помпе или командой с телефона с AAPS (при пользовании совместимыми помпами Dana R/RS или Accu Chek Combo). Этот параметр предназначен для знакомства с работой AndroidAPS или для неподдерживаемых помп.

### Замкнутый цикл

AAPS постоянно оценивает доступные данные (активный инсулин IOB, активные углеводы COB, сахар крови и т. п.) и при необходимости автоматически корректирует лечение (без вашего дальнейшего вмешательства) для достижения целевого диапазона или величины (подача болюса, временная базальная скорость, отключение подачи инсулина во избежание гипогликемии и т.д.). Замкнутый цикл работает в рамках многочисленных ограничений безопасности, каждое из которых можно задать по отдельности. Замкнутый цикл можно инициировать по достижении [цели 4](../Usage/Objectives.md) или далее с поддерживаемой помпой.

## Цели (обучающая программа)

AndroidAPS ставит перед вами ряд задач (целей), которые выполняются шаг за шагом. Подобная организация алгоритма безопасно ведет нас к созданию замкнутой системы. Она гарантирует, что все налажено правильно и мы понимаем, что именно делает система. Это единственный способ доверять системе.

Cледует регулярно экспортировать настройки (в том числе ход выполнения целей). В дальнейшем, если вам потребуется заменить смартфон (новая покупка, повреждение и т. д.) вы можете просто импортировать эти параметры.

См. страницу [Цели](../Usage/Objectives.md) для дополнительной информации.

## Терапия

На вкладке терапии (лечения, назначений) отражены назначения, загруженные из Nightscout. Если требуется редактировать или удалить запись (например, съели меньше углеводов, чем ожидали) выберите «Удалить» и введите новое значение (при необходимости измените время) через вкладку портал терапии Careportal (CP).

## Общие настройки

### Главный экран, Начало

Отображает текущее состояние цикла и кнопки для наиболее распространенных действий (подробнее см. [раздел Главный экран](../Getting-Started/Screenshots.md)). Доступ к параметрам - через значок шестеренки.

#### Не отключать экран

Параметр «не отключать экран» заставит Android постоянно держать экран включенным. Это полезно для презентаций и т. д. Но эта опция потребляет много энергии аккумулятора. Поэтому рекомендуется подключить смартфон к кабелю зарядного устройства.

#### Кнопки

Определите, какие кнопки отображаются на главном экране.

* Терапия
* Калькулятор
* Инсулин
* Углеводы
* Мониторинг (открывает xDrip +)
* Калибровка

Кроме того можно задать сочетания клавиш для приращения инсулина и углеводов и определить, должны ли диалоговые окна содержать примечания.

#### Быстрый болюс

Создайте кнопку для стандартных блюд (углеводы и метод вычисления болюса) которая будет отображаться на главном экране. Пользуйтесь ей для стандартных часто употребляемых блюд. Если для различных блюд указано разное время, у вас всегда будет сответствующая кнопка приема пищи на главном экране, в зависимости от времени суток.

Примечание: Кнопка не будет видна вне диапазона времени, для нее созданного или если у вас есть достаточно активного инсулина IOB на углеводы, заданные кнопкой.

![Кнопка мастера быстрой настройки](../images/ConfBuild_QuickWizard.png)

#### Расширенные настройки

Включите функцию супер болюс в мастере. Применяйтес осторожностью и не активируйте пока не узнаете, как она работает. В общем виде для следующих двух часов к базе добавляется болюс и активируется нулевой временный базал. **Другие функции алгоритма AAPS будут отключены - поэтому применяйте с осторожностью! Если вы используете функции супер микро болюса SMB AAPS, то время его работы будет ограничено в соответствии с настройками в ["Макс. минут базала для микроболюсов SMB"](../Usage/Open-APS-features#max-minutes-of-basal-to-limit-smb-to); если вы не используете SMB, алгоритм AAPS будет отключен на два часа.** Подробности о супер микро болюсе можно найти [здесь](https://www.diabetesnet.com/diabetes-technology/blue-skying/super-bolus).

### Действия

Кнопки быстрого доступа к некоторым распространенным настройкам:

* Переключатель профилей (см. [страницу профилей](../Usage/Profiles.md) для дополнительной информации по настройке)
* Временные цели
* Задать / отменить врем. скорость базала
* Пролонгированный болюс (только для DanaR/RS или Combo)
* Первичное заполнение / заправка картриджа (только для DanaR/RS или Combo)
* Журнал
* TDD (Общая суточная доза = болюс + базал за день)

Некоторые врачи рекомендуют - особенно для новичков помповой терапии - соотношение базал-болюс 50:50. Поэтому эта величина рассчитывается как общая суточная доза TDD / 2 * TBB (общая суточная база = сумма базала в течение 24 часов). Другие предпочитают диапазон от 32% до 37% от величины базала TBB. Как и большинство подобных подсказок они имеют ограниченное практическое значение. Примечание: Ваш диабет может быть иным!

![Вкладка "Действия"](../images/ConfBuild_ConfBuild_Actions.png)

### Портал назначений/терапии

Позволяет вносить любые записи связанные с компенсацией диабета и просматривать информацию о сенсоре, инсулине, катетере и батарее помпы на вкладке Портал назначений/терапии.

Примечание: **Инсулин не подается**, если вводится через Портал назначений/терапии (болюс на еду, коррекцию...)

Углеводы, введенные через Портал назначений/терапии (т.е. углеводы на коррекцию) учитываются при подсчете активных углеводов COB.

![Портал терапии / назначений](../images/ConfBuild_CarePortal.png)

### SMS коммуникатор

Позволяет удалено управлять некоторыми функциями AndroidAPS при помощи SMS, см. [SMS команды](../Usage/SMS-Commands.md) для получения дополнительной информации по настройке.

### Еда

Отображает предустановленные характеристики еды, определенные в базе данных Nightscout, см [Nightscout Readme](https://github.com/nightscout/cgm-remote-monitor#food-custom-foods) для получения дополнительной информации по параметрам.

Примечание: Записи нельзя использовать в калькуляторе AndroidAPS. (Только просмотр)

### Смарт-часы Wear

Мониторим и контролируем AAPS, при помощи смарт-часов Android Wear (см. [страницу Циферблаты](../Configuration/Watchfaces.md)). Настройте параметры (шестеренка) для определения переменных, которые следует учитывать при расчете болюсов (напр. 15-минутный тренд, активные углеводы COB и т.п....).

Если вы хотите подавать болюс и т. д. с часов, тогда в настройках часов Wear следует включить «Управление с часов».

![Настройки смарт-часов Wear](../images/ConfBuild_Wear.png)

При помощи вкладки Wear или многослойного сэндвич-меню (в левой верхней части экрана, если вкладка не отображается) вы можете

* Повторить отправку всех данных. Может быть полезно, если некоторое время часы не были подключены и вы хотите передать на них данные.
* Открыть настройки на часах прямо с телефона.

### Cтрока состояния xDrip (часы)

Отображает информацию о состоянии цикла на циферблате xDrip + (если не пользуетесь циферблатом AAPS /[AAPSv2 ](../Configuration/Watchfaces.md))

### Текущее состояние приложения

Показывает текущий СК, изменение СК, актуальный % временного базала TBR, активный базал ед/ч и профиль, активный инсулин с разбивкой на болюсный IOB и базальный IOB на экране вкладки и на экране блокировки телефона.

![Виджет AAPS](../images/ConfBuild_Widget.png)

### Клиент Nightscout

Синхронизация данных AndroidAPS с Nightscout.

Если активировать **записывать старт приложения в NS**, каждый запуск AndroidAPS будет виден в Nightscout. Может быть полезным для обнаружения проблем с приложением (напр. если для AAPS не отключена оптимизация аккумулятора) но может переполнить записями график Nightscout.

#### Опции оповещения

Активирует / деактивирует сигналы AndroidAPS

![Опции оповещения](../images/ConfBuild_NSClient_Alarms.png)

#### Настройки подключения

Автономный цикл, отключение роуминга...

Если вы хотите использовать только конкретные сети WiFi, вы можете ввести здесь идентификатор сети **WiFi SSID**. Несколько идентификаторов SSID разделяются точкой с запятой. Чтобы удалить все SSID введите в поле пустое пространство.

![Параметры подключения Nightscout](../images/ConfBuild_ConnectionSettings.png)

#### Расширенные настройки

* Заполнять пропущенные значения ГК данными из Nightscout
* Создать оповещение из сообщения об ошибке Создать оповещение Nightscout из диалогов об ошибках и местных оповещений (также отображаются в careportal в разделе лечение/назначения)
* Активировать местную трансляцию на другие приложения (напр. xDrip+)
* Только отправлять на NS (Синхронизация отключена)
* Не отправлять в NS
* Всегда использовать абсолютные значения базала -> должно быть активировано, если вы хотите правильно применять [Autotune](https://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/autotune.html).

![Расширенные настройки Nightscout](../images/ConfBuild_NSClient_Advanced.png)

### Тех. обслуживание

Адрес электронной почты и количество журналов/логов для отправки. Обычно не требует изменений.

### Конфигуратор

Используйте вкладку для конфигуратора вместо выпадающего сэндвич-меню слева.